--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     YslMenu V107 - ULTIMATE BRAINROT EDITION
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    Game: Escape Tsunami For Brainrots
    Creator: yslscripts ğŸ˜ˆ
    
    âœ… Features:
    â€¢ True Wave Immunity (5 methods)
    â€¢ VIP Bypass (OPTIMIZED - No lag)
    â€¢ Smart Brainrot Collection
    â€¢ Radioactive Event Auto-Farm
    â€¢ Bombardiro Bomb Auto-Collect
    â€¢ Auto-Complete Obby
    â€¢ Safe Zone ESP
    â€¢ Speed Bypass (Up to 2000)
    â€¢ Auto-Rebirth System
    â€¢ Mutation Tracker
]]

--// Load Rayfield
local success, Rayfield = pcall(function()
    return loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
end)

if not success then
    warn("âŒ Failed to load Rayfield UI Library")
    return
end

--// Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

--// Player Variables
local lplayer = Players.LocalPlayer
local character = lplayer.Character or lplayer.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")

--// Game-Specific Variables
local PlayerData = {
    Speed = 0,
    CarryCapacity = 1,
    Money = 0,
    Rebirths = 0,
    BrainrotsCollected = 0,
    RadioactiveCoins = 0,
    MutationsFound = 0
}

--// Settings
_G.YslBrainrot = {
    -- Movement
    Speed = false,
    SpeedValue = 100,
    InfJump = false,
    NoClip = false,
    
    -- Collection
    AutoCollectBrainrots = false,
    AutoCollectMoney = false,
    BrainrotRarity = "All", -- Common, Uncommon, Rare, Epic, Legendary, Mythical, Cosmic, Secret, Celestial, All
    OnlyMutations = false,
    
    -- Radioactive Event
    RadioactiveEvent = false,
    AutoCompleteObby = false,
    AutoCollectRadCoins = false,
    AutoDestroyBombs = false,
    AutoSpin = false,
    
    -- Wave Protection
    WaveImmunity = true,
    AutoHideSafezone = false,
    RemoveWaves = false,
    
    -- VIP Bypass (OPTIMIZED)
    VIPBypass = false,
    VIPCheckInterval = 2, -- Check every 2 seconds instead of every frame
    
    -- Auto Features
    AutoRebirth = false,
    RebirthAt = 300, -- Speed threshold
    AutoUpgradeSpeed = false,
    AutoUpgradeCarry = false,
    
    -- ESP
    BrainrotESP = false,
    SafezoneESP = false,
    RadCoinESP = false,
    
    -- Stats
    Stats = {
        BrainrotsCollected = 0,
        WavesBlocked = 0,
        RadCoinsCollected = 0,
        ObbyCompletions = 0
    }
}

--// Connections Storage
local Connections = {}

--// Helper Functions
local function Notify(title, content, duration)
    Rayfield:Notify({
        Title = title,
        Content = content,
        Duration = duration or 3,
        Image = 4483362458
    })
end

local function Disconnect(name)
    if Connections[name] then
        Connections[name]:Disconnect()
        Connections[name] = nil
    end
end

local function GetBrainrotFolder()
    return Workspace:FindFirstChild("Brainrots") or Workspace:FindFirstChild("Items") or Workspace
end

local function GetSafeZones()
    local safezones = {}
    for _, v in pairs(Workspace:GetDescendants()) do
        if v:IsA("BasePart") and (v.Name:lower():find("trench") or v.Name:lower():find("safe") or v.Name:lower():find("pit")) then
            table.insert(safezones, v)
        end
    end
    return safezones
end

--// WAVE IMMUNITY SYSTEM (Multi-layered protection)
local function SetupWaveImmunity()
    if not _G.YslBrainrot.WaveImmunity then
        Disconnect("WaveImmunity")
        return
    end
    
    Connections.WaveImmunity = RunService.Heartbeat:Connect(function()
        pcall(function()
            if not character or not humanoid or not rootPart then return end
            
            -- Method 1: Health protection
            if humanoid.Health < humanoid.MaxHealth then
                humanoid.Health = humanoid.MaxHealth
                _G.YslBrainrot.Stats.WavesBlocked = _G.YslBrainrot.Stats.WavesBlocked + 1
            end
            
            -- Method 2: Remove water around player
            local region = Region3.new(
                rootPart.Position - Vector3.new(30, 30, 30),
                rootPart.Position + Vector3.new(30, 30, 30)
            )
            region = region:ExpandToGrid(4)
            Workspace.Terrain:FillRegion(region, 4, Enum.Material.Air)
            
            -- Method 3: Disable swimming/drowning states
            humanoid:SetStateEnabled(Enum.HumanoidStateType.Swimming, false)
            humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll, false)
        end)
    end)
end

--// VIP BYPASS SYSTEM (OPTIMIZED - No more lag!)
local lastVIPCheck = 0
local function SetupVIPBypass()
    if not _G.YslBrainrot.VIPBypass then
        Disconnect("VIPBypass")
        -- Restore VIP doors
        for _, v in pairs(Workspace:GetDescendants()) do
            if v:IsA("BasePart") and v:GetAttribute("YslVIPDoor") then
                v.CanCollide = true
                v.Transparency = v:GetAttribute("OriginalTransparency") or 0
            end
        end
        return
    end
    
    -- Only check VIP doors every X seconds (not every frame!)
    Connections.VIPBypass = RunService.Heartbeat:Connect(function()
        local currentTime = tick()
        if currentTime - lastVIPCheck < _G.YslBrainrot.VIPCheckInterval then return end
        lastVIPCheck = currentTime
        
        pcall(function()
            -- Find VIP doors within range only
            local nearbyDistance = 50
            
            for _, v in pairs(Workspace:GetDescendants()) do
                if v:IsA("BasePart") then
                    local name = v.Name:lower()
                    
                    -- Check if it's a VIP door
                    if name:find("vip") or name:find("glass") or (v.Parent and v.Parent.Name:lower():find("vip")) then
                        local distance = (v.Position - rootPart.Position).Magnitude
                        
                        -- Only modify doors within 50 studs
                        if distance < nearbyDistance then
                            -- Mark it so we can restore later
                            if not v:GetAttribute("YslVIPDoor") then
                                v:SetAttribute("YslVIPDoor", true)
                                v:SetAttribute("OriginalTransparency", v.Transparency)
                            end
                            
                            v.CanCollide = false
                            v.Transparency = 0.7
                        else
                            -- Restore doors that are far away
                            if v:GetAttribute("YslVIPDoor") then
                                v.CanCollide = true
                                v.Transparency = v:GetAttribute("OriginalTransparency") or 0
                            end
                        end
                    end
                end
            end
        end)
    end)
end

--// SPEED BYPASS SYSTEM
local function SetupSpeedBypass()
    if not _G.YslBrainrot.Speed then
        Disconnect("Speed")
        if humanoid then humanoid.WalkSpeed = 16 end
        return
    end
    
    Connections.Speed = RunService.Heartbeat:Connect(function()
        pcall(function()
            if not humanoid or not rootPart then return end
            
            -- Direct speed
            humanoid.WalkSpeed = _G.YslBrainrot.SpeedValue
            
            -- CFrame boost when moving
            if humanoid.MoveDirection.Magnitude > 0 then
                local boost = (_G.YslBrainrot.SpeedValue / 16) - 1
                rootPart.CFrame = rootPart.CFrame + (humanoid.MoveDirection * boost * 0.08)
            end
        end)
    end)
end

--// NO CLIP SYSTEM
local function SetupNoClip()
    if not _G.YslBrainrot.NoClip then
        Disconnect("NoClip")
        for _, v in pairs(character:GetDescendants()) do
            if v:IsA("BasePart") then
                v.CanCollide = true
            end
        end
        return
    end
    
    Connections.NoClip = RunService.Stepped:Connect(function()
        for _, v in pairs(character:GetDescendants()) do
            if v:IsA("BasePart") then
                v.CanCollide = false
            end
        end
    end)
end

--// BRAINROT AUTO-COLLECTION
local function IsBrainrotValid(brainrot, rarity)
    if not brainrot or not brainrot:IsA("Model") then return false end
    
    -- Check rarity filter
    if _G.YslBrainrot.BrainrotRarity ~= "All" then
        local brainrotName = brainrot.Name:lower()
        local targetRarity = _G.YslBrainrot.BrainrotRarity:lower()
        
        if not brainrotName:find(targetRarity) then
            return false
        end
    end
    
    -- Check mutation filter
    if _G.YslBrainrot.OnlyMutations then
        local hasMutation = false
        for _, v in pairs(brainrot:GetDescendants()) do
            if v:IsA("ParticleEmitter") or v:IsA("PointLight") then
                hasMutation = true
                break
            end
        end
        if not hasMutation then return false end
    end
    
    return true
end

local function SetupAutoCollectBrainrots()
    if not _G.YslBrainrot.AutoCollectBrainrots then
        Disconnect("AutoCollectBrainrots")
        return
    end
    
    Connections.AutoCollectBrainrots = RunService.Heartbeat:Connect(function()
        pcall(function()
            if not rootPart then return end
            
            local brainrotFolder = GetBrainrotFolder()
            
            for _, brainrot in pairs(brainrotFolder:GetChildren()) do
                if IsBrainrotValid(brainrot) then
                    local primaryPart = brainrot.PrimaryPart or brainrot:FindFirstChild("HumanoidRootPart") or brainrot:FindFirstChildWhichIsA("BasePart")
                    
                    if primaryPart then
                        -- Teleport brainrot to player
                        primaryPart.CFrame = rootPart.CFrame
                        primaryPart.CanCollide = false
                        
                        -- Trigger collection
                        if primaryPart.Touched then
                            firetouchinterest(rootPart, primaryPart, 0)
                            task.wait(0.01)
                            firetouchinterest(rootPart, primaryPart, 1)
                        end
                        
                        _G.YslBrainrot.Stats.BrainrotsCollected = _G.YslBrainrot.Stats.BrainrotsCollected + 1
                    end
                end
            end
        end)
        task.wait(0.1) -- Collect every 0.1 seconds
    end)
end

--// RADIOACTIVE EVENT AUTO-FARM
local function FindSecretTunnel()
    for _, v in pairs(Workspace:GetDescendants()) do
        if v:IsA("BasePart") and (v.Name:lower():find("gate") or v.Name:lower():find("tunnel") or v.Name:lower():find("entrance")) then
            if v.Name:lower():find("destroy") or v.Name:lower():find("broken") then
                return v
            end
        end
    end
    return nil
end

local function SetupAutoCompleteObby()
    if not _G.YslBrainrot.AutoCompleteObby then return end
    
    task.spawn(function()
        while _G.YslBrainrot.AutoCompleteObby do
            pcall(function()
                -- Check if radioactive event is active (green sky)
                if game.Lighting.Ambient == Color3.fromRGB(0, 255, 0) or 
                   game.Lighting.ColorShift_Top == Color3.fromRGB(0, 255, 0) then
                    
                    -- Find and TP to tunnel entrance
                    local tunnel = FindSecretTunnel()
                    if tunnel then
                        rootPart.CFrame = tunnel.CFrame + Vector3.new(0, 5, 0)
                        task.wait(1)
                        
                        -- Complete obby (find end point)
                        local endPoint = Workspace:FindFirstChild("ObbyEnd") or Workspace:FindFirstChild("Finish")
                        if endPoint then
                            rootPart.CFrame = endPoint.CFrame
                            _G.YslBrainrot.Stats.ObbyCompletions = _G.YslBrainrot.Stats.ObbyCompletions + 1
                        end
                    end
                end
            end)
            task.wait(60) -- Check every minute
        end
    end)
end

local function SetupAutoCollectRadCoins()
    if not _G.YslBrainrot.AutoCollectRadCoins then
        Disconnect("RadCoins")
        return
    end
    
    Connections.RadCoins = RunService.Heartbeat:Connect(function()
        pcall(function()
            for _, v in pairs(Workspace:GetDescendants()) do
                if v:IsA("BasePart") and (v.Name:lower():find("radioactive") or v.Name:lower():find("coin")) then
                    -- Check for green glow (radioactive indicator)
                    local light = v:FindFirstChild("PointLight")
                    if light and light.Color == Color3.fromRGB(0, 255, 0) then
                        v.CFrame = rootPart.CFrame
                        _G.YslBrainrot.Stats.RadCoinsCollected = _G.YslBrainrot.Stats.RadCoinsCollected + 1
                    end
                end
            end
        end)
        task.wait(0.05)
    end)
end

local function SetupAutoDestroyBombs()
    if not _G.YslBrainrot.AutoDestroyBombs then
        Disconnect("Bombs")
        return
    end
    
    Connections.Bombs = RunService.Heartbeat:Connect(function()
        pcall(function()
            for _, v in pairs(Workspace:GetDescendants()) do
                if v:IsA("Model") and (v.Name:lower():find("bomb") or v.Name:lower():find("nuclear")) then
                    local bombPart = v.PrimaryPart or v:FindFirstChildWhichIsA("BasePart")
                    if bombPart then
                        -- Teleport bomb to player to "hit" it
                        bombPart.CFrame = rootPart.CFrame
                        
                        -- Simulate bat hit
                        local tool = lplayer.Character:FindFirstChildOfClass("Tool")
                        if tool and tool:FindFirstChild("Handle") then
                            firetouchinterest(tool.Handle, bombPart, 0)
                            task.wait(0.01)
                            firetouchinterest(tool.Handle, bombPart, 1)
                        end
                    end
                end
            end
        end)
        task.wait(0.1)
    end)
end

--// AUTO REBIRTH SYSTEM
local function GetPlayerSpeed()
    -- Try to find speed in player's stats
    local speedStat = lplayer:FindFirstChild("leaderstats") and lplayer.leaderstats:FindFirstChild("Speed")
    if speedStat then
        return speedStat.Value
    end
    return humanoid.WalkSpeed
end

local function PerformRebirth()
    pcall(function()
        local rebirthButton = Workspace:FindFirstChild("RebirthButton") or 
                             lplayer.PlayerGui:FindFirstChild("RebirthGui")
        
        if rebirthButton then
            -- Fire rebirth remote
            if ReplicatedStorage:FindFirstChild("RebirthEvent") then
                ReplicatedStorage.RebirthEvent:FireServer()
            end
        end
    end)
end

local function SetupAutoRebirth()
    if not _G.YslBrainrot.AutoRebirth then return end
    
    task.spawn(function()
        while _G.YslBrainrot.AutoRebirth do
            pcall(function()
                local currentSpeed = GetPlayerSpeed()
                if currentSpeed >= _G.YslBrainrot.RebirthAt then
                    PerformRebirth()
                    Notify("Auto Rebirth", "Rebirthed at " .. currentSpeed .. " speed!", 3)
                    task.wait(10) -- Wait before checking again
                end
            end)
            task.wait(5)
        end
    end)
end

--// REMOVE WAVES
local function RemoveAllWaves()
    local count = 0
    for _, v in pairs(Workspace:GetDescendants()) do
        if v:IsA("BasePart") or v:IsA("Model") then
            local name = v.Name:lower()
            if name:find("wave") or name:find("tsunami") or name:find("water") or name:find("flood") then
                -- Destroy scripts first
                for _, script in pairs(v:GetDescendants()) do
                    if script:IsA("Script") or script:IsA("LocalScript") then
                        script:Destroy()
                    end
                end
                v:Destroy()
                count = count + 1
            end
        end
    end
    
    -- Clear terrain water
    Workspace.Terrain:Clear()
    
    return count
end

--// ESP SYSTEMS
local function CreateESP(part, color, text)
    if part:FindFirstChild("YslESP") then return end
    
    local highlight = Instance.new("Highlight")
    highlight.Name = "YslESP"
    highlight.Parent = part
    highlight.FillColor = color
    highlight.OutlineColor = color
    highlight.FillTransparency = 0.5
    highlight.OutlineTransparency = 0
    
    local billboard = Instance.new("BillboardGui")
    billboard.Name = "YslESP"
    billboard.Parent = part
    billboard.Size = UDim2.new(0, 100, 0, 50)
    billboard.StudsOffset = Vector3.new(0, 2, 0)
    billboard.AlwaysOnTop = true
    
    local label = Instance.new("TextLabel")
    label.Parent = billboard
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = color
    label.TextScaled = true
    label.Font = Enum.Font.GothamBold
end

local function SetupBrainrotESP()
    if not _G.YslBrainrot.BrainrotESP then
        -- Remove ESP
        for _, v in pairs(Workspace:GetDescendants()) do
            if v.Name == "YslESP" then v:Destroy() end
        end
        return
    end
    
    task.spawn(function()
        while _G.YslBrainrot.BrainrotESP do
            pcall(function()
                local folder = GetBrainrotFolder()
                for _, brainrot in pairs(folder:GetChildren()) do
                    if brainrot:IsA("Model") then
                        local part = brainrot.PrimaryPart or brainrot:FindFirstChildWhichIsA("BasePart")
                        if part and not part:FindFirstChild("YslESP") then
                            CreateESP(part, Color3.fromRGB(255, 255, 0), brainrot.Name)
                        end
                    end
                end
            end)
            task.wait(2)
        end
    end)
end

local function SetupSafezoneESP()
    if not _G.YslBrainrot.SafezoneESP then
        for _, v in pairs(Workspace:GetDescendants()) do
            if v.Name == "YslESP" then v:Destroy() end
        end
        return
    end
    
    local safezones = GetSafeZones()
    for _, zone in pairs(safezones) do
        CreateESP(zone, Color3.fromRGB(0, 255, 0), "SAFE")
    end
end

--// CREATE GUI
local Window = Rayfield:CreateWindow({
    Name = "âš¡ YslMenu V107 - Brainrot Master âš¡",
    LoadingTitle = "YslMenu V107 Loading...",
    LoadingSubtitle = "The ULTIMATE Escape Tsunami Script ğŸŒŠ",
    ConfigurationSaving = {
        Enabled = true,
        FileName = "YslBrainrot_V107",
        FolderName = "YslScripts"
    },
    Discord = {
        Enabled = true,
        Invite = "yslscripts",
        RememberJoins = true
    },
    KeySystem = false
})

--// TABS
local HomeTab = Window:CreateTab("ğŸ  Home", 4483362458)
local CollectionTab = Window:CreateTab("ğŸ§  Collection", 4483362458)
local RadioactiveTab = Window:CreateTab("â˜¢ï¸ Radioactive", 4483362458)
local MovementTab = Window:CreateTab("ğŸš€ Movement", 4483362458)
local ProtectionTab = Window:CreateTab("ğŸ›¡ï¸ Protection", 4483362458)
local BypassTab = Window:CreateTab("ğŸ”“ Bypass", 4483362458)
local AutoTab = Window:CreateTab("ğŸ¤– Auto Features", 4483362458)
local ESPTab = Window:CreateTab("ğŸ‘ï¸ ESP", 4483362458)
local InfoTab = Window:CreateTab("â„¹ï¸ Info", 4483362458)

--// HOME TAB
HomeTab:CreateSection("ğŸ‘¤ Player Profile")

pcall(function()
    HomeTab:CreateImageLabel({
        Name = "Avatar",
        Image = "rbxthumb://type=AvatarHeadShot&id=" .. lplayer.UserId .. "&w=420&h=420",
        ImageSize = Vector2.new(150, 150)
    })
end)

HomeTab:CreateLabel("ğŸ‘‹ " .. lplayer.DisplayName)
HomeTab:CreateLabel("ğŸ†” @" .. lplayer.Name)

HomeTab:CreateParagraph({
    Title = "ğŸ® YslMenu V107",
    Content = "The ULTIMATE script for Escape Tsunami!\n\nâœ… Wave Immunity\nâœ… Auto-Farm Everything\nâœ… VIP Bypass (Lag-Free)\nâœ… Radioactive Event Farm\nâœ… Smart Collection\n\nğŸ˜ˆ ysl on top"
})

HomeTab:CreateSection("ğŸ“Š Live Stats")

local statsLabel = HomeTab:CreateLabel("Loading stats...")
task.spawn(function()
    while task.wait(3) do
        pcall(function()
            local stats = string.format(
                "ğŸ§  Brainrots: %d\nğŸŒŠ Waves Blocked: %d\nâ˜¢ï¸ Rad Coins: %d\nğŸ¯ Obby Completions: %d",
                _G.YslBrainrot.Stats.BrainrotsCollected,
                _G.YslBrainrot.Stats.WavesBlocked,
                _G.YslBrainrot.Stats.RadCoinsCollected,
                _G.YslBrainrot.Stats.ObbyCompletions
            )
            statsLabel:Set(stats)
        end)
    end
end)

HomeTab:CreateSection("âš ï¸ Quick Actions")

HomeTab:CreateButton({
    Name = "ğŸ†˜ EMERGENCY MODE (Everything ON)",
    Callback = function()
        _G.YslBrainrot.WaveImmunity = true
        _G.YslBrainrot.VIPBypass = true
        _G.YslBrainrot.Speed = true
        _G.YslBrainrot.SpeedValue = 500
        _G.YslBrainrot.AutoCollectBrainrots = true
        
        SetupWaveImmunity()
        SetupVIPBypass()
        SetupSpeedBypass()
        SetupAutoCollectBrainrots()
        
        -- TP to safe spot
        local safezones = GetSafeZones()
        if #safezones > 0 then
            rootPart.CFrame = safezones[1].CFrame + Vector3.new(0, 10, 0)
        end
        
        Notify("ğŸ†˜ EMERGENCY", "All protections activated! Safe TP executed! ğŸ˜ˆ", 5)
    end,
})

--// COLLECTION TAB
CollectionTab:CreateSection("ğŸ§  Brainrot Collection")

CollectionTab:CreateToggle({
    Name = "ğŸ§² Auto-Collect Brainrots",
    CurrentValue = false,
    Flag = "AutoCollect",
    Callback = function(Value)
        _G.YslBrainrot.AutoCollectBrainrots = Value
        SetupAutoCollectBrainrots()
        Notify("Auto-Collect", Value and "Collecting brainrots! ğŸ§ " or "Stopped", 2)
    end,
})

CollectionTab:CreateDropdown({
    Name = "ğŸ¯ Target Rarity",
    Options = {"All", "Common", "Uncommon", "Rare", "Epic", "Legendary", "Mythical", "Cosmic", "Secret", "Celestial"},
    CurrentOption = "All",
    Flag = "Rarity",
    Callback = function(Option)
        _G.YslBrainrot.BrainrotRarity = Option
        Notify("Rarity Filter", "Now targeting: " .. Option, 2)
    end,
})

CollectionTab:CreateToggle({
    Name = "âœ¨ Only Collect Mutations",
    CurrentValue = false,
    Flag = "OnlyMutations",
    Callback = function(Value)
        _G.YslBrainrot.OnlyMutations = Value
    end,
})

CollectionTab:CreateSection("ğŸ’° Money Collection")

CollectionTab:CreateToggle({
    Name = "ğŸ’µ Auto-Collect Money",
    CurrentValue = false,
    Flag = "AutoMoney",
    Callback = function(Value)
        _G.YslBrainrot.AutoCollectMoney = Value
        
        if Value then
            task.spawn(function()
                while _G.YslBrainrot.AutoCollectMoney do
                    pcall(function()
                        -- Find money spawns
                        for _, v in pairs(Workspace:GetDescendants()) do
                            if v:IsA("BasePart") and v.Name:lower():find("money") then
                                v.CFrame = rootPart.CFrame
                            end
                        end
                    end)
                    task.wait(0.1)
                end
            end)
        end
    end,
})

CollectionTab:CreateSection("ğŸ¯ Instant Actions")

CollectionTab:CreateButton({
    Name = "ğŸ“ TP to Celestial Zone (600m+)",
    Callback = function()
        -- TP to far end of map
        local farthestPoint = nil
        local maxDistance = 0
        
        for _, v in pairs(Workspace:GetDescendants()) do
            if v:IsA("BasePart") then
                local distance = (v.Position - Vector3.new(0, 0, 0)).Magnitude
                if distance > maxDistance then
                    maxDistance = distance
                    farthestPoint = v
                end
            end
        end
        
        if farthestPoint then
            rootPart.CFrame = CFrame.new(farthestPoint.Position + Vector3.new(0, 10, 0))
            Notify("Teleport", "Warped to Celestial zone! ğŸŒŸ", 3)
        end
    end,
})

CollectionTab:CreateButton({
    Name = "ğŸ  Return to Base",
    Callback = function()
        local spawn = Workspace:FindFirstChild("SpawnLocation")
        if spawn then
            rootPart.CFrame = spawn.CFrame + Vector3.new(0, 5, 0)
        else
            rootPart.CFrame = CFrame.new(0, 50, 0)
        end
        Notify("Teleport", "Returned to base ğŸ ", 2)
    end,
})

--// RADIOACTIVE TAB
RadioactiveTab:CreateSection("â˜¢ï¸ Radioactive Event Farm")

RadioactiveTab:CreateParagraph({
    Title = "â„¹ï¸ Event Info",
    Content = "Radioactive events happen every hour for 5 minutes!\n\nğŸ¯ Secret Tunnel Obby\nğŸ’£ Bombardiro Bomb Farming\nğŸ° Auto-Spin Wheel"
})

RadioactiveTab:CreateToggle({
    Name = "ğŸƒ Auto-Complete Obby",
    CurrentValue = false,
    Flag = "AutoObby",
    Callback = function(Value)
        _G.YslBrainrot.AutoCompleteObby = Value
        if Value then
            SetupAutoCompleteObby()
            Notify("Auto Obby", "Will complete obby when event starts! ğŸƒ", 3)
        end
    end,
})

RadioactiveTab:CreateToggle({
    Name = "â˜¢ï¸ Auto-Collect Radioactive Coins",
    CurrentValue = false,
    Flag = "AutoRadCoins",
    Callback = function(Value)
        _G.YslBrainrot.AutoCollectRadCoins = Value
        SetupAutoCollectRadCoins()
        Notify("Rad Coins", Value and "Collecting radioactive coins! â˜¢ï¸" or "Stopped", 2)
    end,
})

RadioactiveTab:CreateToggle({
    Name = "ğŸ’£ Auto-Destroy Bombardiro Bombs",
    CurrentValue = false,
    Flag = "AutoBombs",
    Callback = function(Value)
        _G.YslBrainrot.AutoDestroyBombs = Value
        SetupAutoDestroyBombs()
        Notify("Bomb Farm", Value and "Destroying bombs for coins! ğŸ’£" or "Stopped", 2)
    end,
})

RadioactiveTab:CreateToggle({
    Name = "ğŸ° Auto-Spin Wheel (20 coins each)",
    CurrentValue = false,
    Flag = "AutoSpin",
    Callback = function(Value)
        _G.YslBrainrot.AutoSpin = Value
        
        if Value then
            task.spawn(function()
                while _G.YslBrainrot.AutoSpin do
                    pcall(function()
                        -- Find spin wheel
                        local wheel = Workspace:FindFirstChild("RadioactiveSpin") or 
                                     Workspace:FindFirstChild("SpinWheel")
                        
                        if wheel then
                            local clickDetector = wheel:FindFirstChildOfClass("ClickDetector")
                            if clickDetector then
                                fireclickdetector(clickDetector)
                            end
                        end
                    end)
                    task.wait(2) -- Spin every 2 seconds
                end
            end)
        end
    end,
})

RadioactiveTab:CreateSection("ğŸ“ Event Teleports")

RadioactiveTab:CreateButton({
    Name = "ğŸšª TP to Secret Tunnel Entrance",
    Callback = function()
        local tunnel = FindSecretTunnel()
        if tunnel then
            rootPart.CFrame = tunnel.CFrame + Vector3.new(0, 5, 0)
            Notify("Teleport", "Found secret tunnel entrance! ğŸšª", 3)
        else
            Notify("Error", "Tunnel not found! Wait for radioactive event.", 3)
        end
    end,
})

--// MOVEMENT TAB
MovementTab:CreateSection("âš¡ Speed Controls")

MovementTab:CreateSlider({
    Name = "Speed Value",
    Range = {16, 2000},
    Increment = 1,
    CurrentValue = 100,
    Flag = "SpeedValue",
    Callback = function(Value)
        _G.YslBrainrot.SpeedValue = Value
    end,
})

MovementTab:CreateToggle({
    Name = "ğŸš€ Enable Speed Hack",
    CurrentValue = false,
    Flag = "SpeedHack",
    Callback = function(Value)
        _G.YslBrainrot.Speed = Value
        SetupSpeedBypass()
        Notify("Speed", Value and ("Speed: " .. _G.YslBrainrot.SpeedValue .. " ğŸš€") or "Disabled", 2)
    end,
})

MovementTab:CreateSection("ğŸˆ Jump Controls")

MovementTab:CreateToggle({
    Name = "Infinite Jump",
    CurrentValue = false,
    Flag = "InfJump",
    Callback = function(Value)
        _G.YslBrainrot.InfJump = Value
    end,
})

MovementTab:CreateSlider({
    Name = "Jump Power",
    Range = {50, 300},
    Increment = 10,
    CurrentValue = 50,
    Flag = "JumpPower",
    Callback = function(Value)
        if humanoid then
            humanoid.JumpPower = Value
        end
    end,
})

MovementTab:CreateSection("ğŸ‘» Phase")

MovementTab:CreateToggle({
    Name = "ğŸŒ™ No Clip (Walk Through Walls)",
    CurrentValue = false,
    Flag = "NoClip",
    Callback = function(Value)
        _G.YslBrainrot.NoClip = Value
        SetupNoClip()
        Notify("No Clip", Value and "Phase mode ON ğŸ‘»" or "OFF", 2)
    end,
})

--// PROTECTION TAB
ProtectionTab:CreateSection("ğŸ›¡ï¸ Wave Protection")

ProtectionTab:CreateToggle({
    Name = "ğŸŒŠ ULTIMATE Wave Immunity",
    CurrentValue = true,
    Flag = "WaveImmunity",
    Callback = function(Value)
        _G.YslBrainrot.WaveImmunity = Value
        SetupWaveImmunity()
        Notify("Wave Immunity", Value and "IMMORTAL TO WAVES ğŸŒŠ" or "Disabled", 3)
    end,
})

ProtectionTab:CreateButton({
    Name = "ğŸ”¥ Remove All Waves NOW",
    Callback = function()
        Notify("Removing Waves", "Deleting all tsunami waves...", 2)
        task.wait(0.5)
        local count = RemoveAllWaves()
        Notify("Success", "Destroyed " .. count .. " wave objects! ğŸ”¥", 4)
    end,
})

ProtectionTab:CreateSection("ğŸ’š Health")

ProtectionTab:CreateButton({
    Name = "ğŸ’š Full Heal",
    Callback = function()
        if humanoid then
            humanoid.Health = humanoid.MaxHealth
            Notify("Healed", "HP: " .. humanoid.MaxHealth .. " â¤ï¸", 2)
        end
    end,
})

--// BYPASS TAB
BypassTab:CreateSection("ğŸ”“ VIP Door Bypass")

BypassTab:CreateParagraph({
    Title = "â„¹ï¸ VIP Bypass Info",
    Content = "âœ… OPTIMIZED - No more lag!\nâœ… Only checks doors within 50 studs\nâœ… Auto-restores far doors\nâœ… Checks every 2 seconds (not every frame)\n\nThis saves MASSIVE performance!"
})

BypassTab:CreateToggle({
    Name = "ğŸ‘‘ Enable VIP Door Bypass (LAG-FREE)",
    CurrentValue = false,
    Flag = "VIPBypass",
    Callback = function(Value)
        _G.YslBrainrot.VIPBypass = Value
        SetupVIPBypass()
        Notify("VIP Bypass", Value and "All VIP doors unlocked! (Optimized) ğŸ‘‘" or "OFF", 3)
    end,
})

BypassTab:CreateSlider({
    Name = "Check Interval (Seconds)",
    Range = {0.5, 5},
    Increment = 0.5,
    CurrentValue = 2,
    Flag = "VIPInterval",
    Callback = function(Value)
        _G.YslBrainrot.VIPCheckInterval = Value
        Notify("VIP Settings", "Check interval: " .. Value .. "s", 2)
    end,
})

BypassTab:CreateSection("ğŸ—‘ï¸ Object Removal")

BypassTab:CreateButton({
    Name = "Remove All Barriers",
    Callback = function()
        local removed = 0
        for _, v in pairs(Workspace:GetDescendants()) do
            if v:IsA("BasePart") and v.CanCollide then
                if v.Name:lower():find("wall") or v.Name:lower():find("barrier") then
                    v:Destroy()
                    removed = removed + 1
                end
            end
        end
        Notify("Cleanup", "Removed " .. removed .. " barriers ğŸ—‘ï¸", 3)
    end,
})

--// AUTO FEATURES TAB
AutoTab:CreateSection("ğŸ¤– Auto Systems")

AutoTab:CreateToggle({
    Name = "ğŸ”„ Auto-Rebirth",
    CurrentValue = false,
    Flag = "AutoRebirth",
    Callback = function(Value)
        _G.YslBrainrot.AutoRebirth = Value
        if Value then
            SetupAutoRebirth()
            Notify("Auto Rebirth", "Will rebirth at " .. _G.YslBrainrot.RebirthAt .. " speed!", 3)
        end
    end,
})

AutoTab:CreateSlider({
    Name = "Rebirth At Speed",
    Range = {100, 1000},
    Increment = 10,
    CurrentValue = 300,
    Flag = "RebirthSpeed",
    Callback = function(Value)
        _G.YslBrainrot.RebirthAt = Value
    end,
})

AutoTab:CreateSection("âš¡ Auto Upgrades")

AutoTab:CreateToggle({
    Name = "âš¡ Auto-Upgrade Speed",
    CurrentValue = false,
    Flag = "AutoSpeed",
    Callback = function(Value)
        _G.YslBrainrot.AutoUpgradeSpeed = Value
        
        if Value then
            task.spawn(function()
                while _G.YslBrainrot.AutoUpgradeSpeed do
                    pcall(function()
                        local speedShop = Workspace:FindFirstChild("SpeedShop")
                        if speedShop then
                            local button = speedShop:FindFirstChild("BuyButton")
                            if button and button:FindFirstChildOfClass("ClickDetector") then
                                fireclickdetector(button:FindFirstChildOfClass("ClickDetector"))
                            end
                        end
                    end)
                    task.wait(1)
                end
            end)
        end
    end,
})

AutoTab:CreateToggle({
    Name = "ğŸ’ Auto-Upgrade Carry Capacity",
    CurrentValue = false,
    Flag = "AutoCarry",
    Callback = function(Value)
        _G.YslBrainrot.AutoUpgradeCarry = Value
        
        if Value then
            task.spawn(function()
                while _G.YslBrainrot.AutoUpgradeCarry do
                    pcall(function()
                        local carryShop = Workspace:FindFirstChild("CarryShop")
                        if carryShop then
                            local button = carryShop:FindFirstChild("BuyButton")
                            if button and button:FindFirstChildOfClass("ClickDetector") then
                                fireclickdetector(button:FindFirstChildOfClass("ClickDetector"))
                            end
                        end
                    end)
                    task.wait(1)
                end
            end)
        end
    end,
})

--// ESP TAB
ESPTab:CreateSection("ğŸ‘ï¸ Visual ESP")

ESPTab:CreateToggle({
    Name = "ğŸ§  Brainrot ESP",
    CurrentValue = false,
    Flag = "BrainrotESP",
    Callback = function(Value)
        _G.YslBrainrot.BrainrotESP = Value
        SetupBrainrotESP()
    end,
})

ESPTab:CreateToggle({
    Name = "ğŸŸ¢ Safe Zone ESP",
    CurrentValue = false,
    Flag = "SafezoneESP",
    Callback = function(Value)
        _G.YslBrainrot.SafezoneESP = Value
        SetupSafezoneESP()
    end,
})

ESPTab:CreateToggle({
    Name = "â˜¢ï¸ Radioactive Coin ESP",
    CurrentValue = false,
    Flag = "RadCoinESP",
    Callback = function(Value)
        _G.YslBrainrot.RadCoinESP = Value
        
        if Value then
            task.spawn(function()
                while _G.YslBrainrot.RadCoinESP do
                    for _, v in pairs(Workspace:GetDescendants()) do
                        if v:IsA("BasePart") and v.Name:lower():find("radioactive") then
                            if not v:FindFirstChild("YslESP") then
                                CreateESP(v, Color3.fromRGB(0, 255, 0), "RAD COIN")
                            end
                        end
                    end
                    task.wait(2)
                end
            end)
        else
            for _, v in pairs(Workspace:GetDescendants()) do
                if v.Name == "YslESP" then v:Destroy() end
            end
        end
    end,
})

ESPTab:CreateSection("ğŸ¨ Visual Tweaks")

ESPTab:CreateButton({
    Name = "â˜€ï¸ Full Brightness",
    Callback = function()
        game.Lighting.Brightness = 3
        game.Lighting.ClockTime = 12
        game.Lighting.FogEnd = 100000
        game.Lighting.GlobalShadows = false
        Notify("Brightness", "Max brightness enabled â˜€ï¸", 2)
    end,
})

ESPTab:CreateButton({
    Name = "ğŸ§¹ Remove Lag (Clear Effects)",
    Callback = function()
        local removed = 0
        for _, v in pairs(Workspace:GetDescendants()) do
            if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") then
                v:Destroy()
                removed = removed + 1
            end
        end
        Notify("Cleanup", "Removed " .. removed .. " effects ğŸ§¹", 2)
    end,
})

--// INFO TAB
InfoTab:CreateSection("ğŸ“– Script Information")

InfoTab:CreateParagraph({
    Title = "âš¡ YslMenu V107",
    Content = "The ULTIMATE script for Escape Tsunami For Brainrots!\n\nVersion: V107 ULTIMATE\nCreator: yslscripts\nGame: Escape Tsunami For Brainrots\n\nğŸ˜ˆ ysl on top"
})

InfoTab:CreateParagraph({
    Title = "âœ¨ Features",
    Content = "âœ… Wave Immunity (5 protection methods)\nâœ… VIP Bypass (LAG-FREE optimization)\nâœ… Auto-Collect Brainrots (All rarities)\nâœ… Radioactive Event Farm\nâœ… Auto-Complete Obby\nâœ… Bombardiro Bomb Farm\nâœ… Auto-Spin Wheel\nâœ… Auto-Rebirth System\nâœ… ESP Systems\nâœ… Speed up to 2000\nâœ… Smart Collection Filters"
})

InfoTab:CreateParagraph({
    Title = "ğŸ”¥ What's New",
    Content = "V107 Changes:\nâ€¢ VIP Bypass OPTIMIZED (no more lag!)\nâ€¢ Radioactive event auto-farm\nâ€¢ Bombardiro bomb destroyer\nâ€¢ Auto-complete obby\nâ€¢ Mutation-only filter\nâ€¢ Rarity selection\nâ€¢ Auto-rebirth system\nâ€¢ Safe zone ESP\nâ€¢ Performance improvements"
})

InfoTab:CreateSection("ğŸ® Game Tips")

InfoTab:CreateParagraph({
    Title = "ğŸ’¡ Pro Tips",
    Content = "1. Use Wave Immunity before going far\n2. Enable VIP Bypass to access safe zones\n3. Set Auto-Collect to 'Celestial' for best income\n4. During Radioactive Event, enable Auto-Obby + Bomb Farm\n5. Auto-Rebirth at 300 speed is optimal\n6. Use Safe Zone ESP to find hiding spots\n7. Speed 200-300 is perfect for Celestial zone"
})

InfoTab:CreateSection("ğŸ”— Links")

InfoTab:CreateButton({
    Name = "ğŸ“‹ Copy Discord",
    Callback = function()
        setclipboard("discord.gg/yslscripts")
        Notify("Copied", "Discord: discord.gg/yslscripts", 3)
    end,
})

InfoTab:CreateButton({
    Name = "ğŸ”„ Respawn Character",
    Callback = function()
        lplayer.Character:BreakJoints()
    end,
})

--// INFINITE JUMP HANDLER
UserInputService.JumpRequest:Connect(function()
    if _G.YslBrainrot.InfJump and humanoid then
        pcall(function()
            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
        end)
    end
end)

--// CHARACTER RESPAWN HANDLER
lplayer.CharacterAdded:Connect(function(newChar)
    task.wait(1)
    character = newChar
    humanoid = newChar:WaitForChild("Humanoid")
    rootPart = newChar:WaitForChild("HumanoidRootPart")
    
    -- Reapply all active features
    if _G.YslBrainrot.WaveImmunity then SetupWaveImmunity() end
    if _G.YslBrainrot.VIPBypass then SetupVIPBypass() end
    if _G.YslBrainrot.Speed then SetupSpeedBypass() end
    if _G.YslBrainrot.NoClip then SetupNoClip() end
    if _G.YslBrainrot.AutoCollectBrainrots then SetupAutoCollectBrainrots() end
    if _G.YslBrainrot.AutoCollectRadCoins then SetupAutoCollectRadCoins() end
    if _G.YslBrainrot.AutoDestroyBombs then SetupAutoDestroyBombs() end
    
    Notify("Respawned", "All features reapplied âœ…", 2)
end)

--// FINAL NOTIFICATION
Notify("âš¡ YslMenu V107 Loaded!", "All systems online! Wave immunity, VIP bypass, radioactive farm ready! ğŸ˜ˆ", 6)

print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("  YslMenu V107 - BRAINROT MASTER")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("âœ… Wave Immunity: ACTIVE")
print("âœ… VIP Bypass: OPTIMIZED (Lag-free)")
print("âœ… Auto-Collect: READY")
print("âœ… Radioactive Farm: READY")
print("âœ… Auto-Rebirth: READY")
print("âœ… ESP Systems: READY")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("ğŸ”¥ ysl on top ğŸ˜ˆ")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
