--[[
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘  LAST LETTER - ACTUALLY WORKING VERSION              â•‘
    â•‘  Deep Game Inspector + Real Auto Type                â•‘
    â•‘  Made for JJSploit                                   â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
]]

print("ğŸ”¤ Loading REAL Last Letter Script...")

-- Load UI
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")
local UserInputService = game:GetService("UserInputService")

-- Player
local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

-- Settings
local Settings = {
    AutoPlay = false,
    AutoSit = false,
    TypeDelay = 0.5,
    AntiAFK = true,
}

-- HUGE Word Lists by Starting Letter
local Words = {
    a = {"apple", "ant", "amazing", "anchor", "art", "animal", "astronaut", "adventure", "apartment", "algorithm", "afternoon"},
    b = {"ball", "bat", "banana", "book", "bird", "butterfly", "bottle", "brother", "basketball", "beautiful", "building"},
    c = {"cat", "car", "cake", "computer", "camera", "chicken", "chair", "castle", "cloud", "coffee", "chocolate", "circle"},
    d = {"dog", "door", "dragon", "diamond", "desk", "dinner", "dream", "dance", "doctor", "dolphin", "dangerous", "desert"},
    e = {"elephant", "egg", "earth", "eye", "ear", "energy", "eagle", "engine", "excellent", "experience", "environment"},
    f = {"fish", "fire", "flower", "forest", "friend", "frog", "fruit", "football", "family", "fantastic", "festival"},
    g = {"game", "garden", "guitar", "ghost", "giant", "gold", "green", "glass", "grape", "girlfriend", "government"},
    h = {"house", "hat", "horse", "heart", "hand", "happy", "helicopter", "honey", "hospital", "hamburger", "history"},
    i = {"ice", "island", "internet", "iron", "igloo", "idea", "important", "impossible", "interesting", "invisible"},
    j = {"jump", "juice", "jacket", "joke", "jungle", "jewel", "journey", "joy", "justice", "jigsaw", "jellyfish"},
    k = {"king", "key", "keyboard", "kitchen", "kangaroo", "knife", "knowledge", "kite", "kingdom", "kitten"},
    l = {"lion", "lamp", "laptop", "lemon", "library", "letter", "lightning", "leaf", "lucky", "language", "lizard"},
    m = {"monkey", "moon", "mouse", "mountain", "music", "machine", "magic", "mirror", "monster", "museum", "money"},
    n = {"night", "notebook", "north", "nature", "number", "ninja", "name", "nation", "network", "nuclear"},
    o = {"orange", "ocean", "owl", "olive", "office", "operation", "option", "origin", "outdoor", "obvious"},
    p = {"pizza", "penguin", "phone", "piano", "paper", "planet", "picture", "purple", "party", "password", "perfect"},
    q = {"queen", "question", "quick", "quiet", "quote", "quality", "quantum", "quest", "quartz", "quarter"},
    r = {"robot", "rain", "rainbow", "rocket", "river", "rabbit", "rose", "radio", "restaurant", "revolution"},
    s = {"sun", "star", "snake", "school", "science", "stone", "sword", "song", "street", "sugar", "system", "sandwich"},
    t = {"tree", "tiger", "table", "train", "turtle", "tower", "telephone", "thunder", "telescope", "treasure"},
    u = {"umbrella", "universe", "uncle", "unicorn", "under", "unique", "university", "urban", "ultimate"},
    v = {"violin", "volcano", "video", "village", "victory", "vampire", "valley", "vegetable", "vehicle", "vintage"},
    w = {"water", "wolf", "window", "world", "whale", "winter", "weapon", "wizard", "wonderful", "weekend"},
    x = {"xray", "xylophone", "xbox", "xenon"},
    y = {"yellow", "yes", "yacht", "yard", "year", "youth", "yogurt", "yesterday", "yell"},
    z = {"zebra", "zero", "zombie", "zone", "zipper", "zoo", "zigzag", "zenith"}
}

-- Multi-letter words
local TwoLetterWords = {
    ab = {"cab", "dab", "lab", "crab", "stab"},
    ad = {"bad", "dad", "mad", "sad", "glad", "road"},
    ag = {"bag", "tag", "flag", "drag"},
    al = {"ball", "call", "fall", "hall", "wall", "small"},
    am = {"ham", "jam", "exam", "team", "cream"},
    an = {"can", "fan", "man", "pan", "plan", "than", "ocean"},
    ar = {"car", "bar", "far", "star", "war", "guitar"},
    at = {"bat", "cat", "hat", "mat", "rat", "flat"},
    ay = {"day", "may", "pay", "say", "way", "play", "today"},
    ce = {"face", "place", "race", "space", "peace"},
    ch = {"beach", "reach", "teach", "each", "coach"},
    ck = {"back", "black", "quick", "stick", "truck"},
    ed = {"bed", "fed", "red", "shed", "speed"},
    ee = {"bee", "see", "tree", "free", "three"},
    el = {"feel", "steel", "wheel", "angel"},
    em = {"them", "item", "system", "problem"},
    en = {"pen", "ten", "when", "then", "open"},
    er = {"her", "water", "after", "better", "number"},
    et = {"get", "let", "met", "set", "yet", "target"},
    ew = {"new", "few", "view", "crew"},
    ge = {"age", "cage", "page", "stage", "large"},
    ht = {"fight", "light", "night", "right", "sight"},
    ic = {"magic", "music", "basic", "comic"},
    id = {"kid", "did", "grid", "solid"},
    ie = {"die", "lie", "pie", "tie", "movie"},
    ig = {"big", "dig", "pig"},
    il = {"oil", "soil", "boil", "mail", "tail"},
    im = {"him", "dim", "swim", "victim"},
    in = {"bin", "win", "skin", "begin", "robin"},
    ip = {"ship", "chip", "trip", "grip"},
    ir = {"sir", "bird", "girl", "shirt", "third"},
    it = {"bit", "fit", "hit", "sit", "split"},
    ix = {"fix", "mix", "six"},
    ke = {"make", "take", "wake", "snake", "bike"},
    le = {"able", "table", "apple", "simple", "circle"},
    ll = {"all", "ball", "call", "fall", "small"},
    ly = {"fly", "sky", "apply", "family"},
    me = {"come", "game", "home", "name", "time"},
    mp = {"camp", "jump", "lamp", "stamp"},
    nd = {"and", "band", "hand", "land", "sand", "wind"},
    ne = {"one", "done", "gone", "phone", "stone"},
    ng = {"king", "ring", "sing", "thing", "long"},
    nk = {"bank", "tank", "think", "drink"},
    nt = {"ant", "want", "plant", "point", "front"},
    od = {"god", "food", "good", "wood"},
    og = {"dog", "fog", "log", "frog"},
    ok = {"book", "cook", "look", "took"},
    ol = {"cool", "pool", "school", "tool"},
    om = {"mom", "from", "room", "boom"},
    on = {"on", "son", "lion", "lemon", "person"},
    op = {"hop", "pop", "shop", "stop", "drop"},
    or = {"for", "door", "floor", "color", "doctor"},
    ot = {"hot", "not", "got", "robot", "cannot"},
    ou = {"you", "about", "famous", "nervous"},
    ow = {"cow", "how", "now", "show", "window"},
    ox = {"box", "fox"},
    oy = {"boy", "joy", "toy", "enjoy"},
    pe = {"hope", "rope", "type", "escape"},
    re = {"are", "fire", "more", "sure", "before"},
    se = {"use", "case", "base", "rose", "horse"},
    sh = {"fish", "wish", "brush", "flash"},
    st = {"best", "fast", "last", "first", "forest"},
    te = {"late", "gate", "vote", "create"},
    th = {"bath", "math", "path", "with", "youth"},
    ue = {"blue", "true", "continue", "value"},
    um = {"gum", "sum", "drum", "album"},
    un = {"fun", "run", "sun", "begun"},
    ur = {"our", "four", "your", "hour"},
    us = {"bus", "plus", "focus", "bonus"},
    ut = {"but", "cut", "shut", "output"},
    ve = {"have", "give", "love", "move", "above"},
    we = {"we", "awe", "awesome"},
    ze = {"size", "prize", "freeze"}
}

-- State
local UsedWords = {}
local CurrentInput = nil
local GameInfo = {
    CurrentLetter = "",
    MyTurn = false,
    InGame = false
}

-- Window
local Window = Rayfield:CreateWindow({
    Name = "ğŸ”¤ Last Letter - Working Version",
    LoadingTitle = "Deep Scanning Game...",
    LoadingSubtitle = "Finding GUI Elements",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "LastLetterReal",
        FileName = "Config"
    },
})

-- Tabs
local MainTab = Window:CreateTab("ğŸ® Main", 4483362458)
local WordsTab = Window:CreateTab("ğŸ“– Words", 4483362458)
local DebugTab = Window:CreateTab("ğŸ” Debug", 4483362458)

-- Notify
local function Notify(title, content, duration)
    Rayfield:Notify({
        Title = title,
        Content = content,
        Duration = duration or 3,
    })
end

--[[ DEEP GAME SCANNER ]]

local function ScanGUI()
    print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
    print("ğŸ” SCANNING PLAYER GUI...")
    print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
    
    local foundTextBoxes = {}
    local foundLabels = {}
    local foundButtons = {}
    
    for _, gui in pairs(PlayerGui:GetDescendants()) do
        -- Find TextBoxes
        if gui:IsA("TextBox") then
            table.insert(foundTextBoxes, gui)
            print("ğŸ“ TextBox:", gui.Name, "Parent:", gui.Parent.Name, "Text:", gui.Text)
        end
        
        -- Find Important Labels
        if gui:IsA("TextLabel") then
            local text = gui.Text:lower()
            if text:find("turn") or text:find("type") or text:find("word") or 
               text:find("letter") or #text <= 3 then
                table.insert(foundLabels, gui)
                print("ğŸ“„ Label:", gui.Name, "Text:", gui.Text, "Parent:", gui.Parent.Name)
            end
        end
        
        -- Find Buttons
        if gui:IsA("TextButton") then
            table.insert(foundButtons, gui)
            print("ğŸ”˜ Button:", gui.Name, "Text:", gui.Text)
        end
    end
    
    print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
    print("Found " .. #foundTextBoxes .. " TextBoxes")
    print("Found " .. #foundLabels .. " Important Labels")
    print("Found " .. #foundButtons .. " Buttons")
    print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
    
    return {
        TextBoxes = foundTextBoxes,
        Labels = foundLabels,
        Buttons = foundButtons
    }
end

local function FindInputBox()
    -- Find the text input where players type words
    for _, gui in pairs(PlayerGui:GetDescendants()) do
        if gui:IsA("TextBox") and gui.Visible then
            -- Check if it's likely the word input
            if gui.Name:lower():find("input") or 
               gui.Name:lower():find("text") or 
               gui.Name:lower():find("word") or
               gui.PlaceholderText ~= "" then
                CurrentInput = gui
                return gui
            end
        end
    end
    
    -- Fallback - just get the first visible textbox
    for _, gui in pairs(PlayerGui:GetDescendants()) do
        if gui:IsA("TextBox") and gui.Visible then
            CurrentInput = gui
            return gui
        end
    end
    
    return nil
end

local function DetectRequiredLetter()
    -- Try to find what letter the word should start with
    for _, gui in pairs(PlayerGui:GetDescendants()) do
        if gui:IsA("TextLabel") and gui.Visible then
            local text = gui.Text:upper()
            
            -- Check if it's a single letter or two letters
            if #text >= 1 and #text <= 3 then
                -- Make sure it's actually letters
                if text:match("^[A-Z]+$") then
                    GameInfo.CurrentLetter = text
                    return text
                end
            end
            
            -- Check for patterns like "Start with: A"
            local match = text:match("START WITH:? ([A-Z]+)")
            if match then
                GameInfo.CurrentLetter = match
                return match
            end
            
            -- Check for "Type a word starting with A"
            match = text:match("STARTING WITH ([A-Z]+)")
            if match then
                GameInfo.CurrentLetter = match
                return match
            end
        end
    end
    
    return nil
end

--[[ WORD FINDER ]]

local function FindWord(startLetter)
    startLetter = startLetter:lower()
    local validWords = {}
    
    -- Single letter search
    if #startLetter == 1 then
        if Words[startLetter] then
            for _, word in ipairs(Words[startLetter]) do
                if not table.find(UsedWords, word) then
                    table.insert(validWords, word)
                end
            end
        end
    end
    
    -- Two letter search
    if #startLetter == 2 then
        if TwoLetterWords[startLetter] then
            for _, word in ipairs(TwoLetterWords[startLetter]) do
                if not table.find(UsedWords, word) then
                    table.insert(validWords, word)
                end
            end
        end
    end
    
    -- If no words found, search all words that start with the letter(s)
    if #validWords == 0 then
        for letter, wordList in pairs(Words) do
            if letter:sub(1, #startLetter) == startLetter then
                for _, word in ipairs(wordList) do
                    if word:sub(1, #startLetter):lower() == startLetter and 
                       not table.find(UsedWords, word) then
                        table.insert(validWords, word)
                    end
                end
            end
        end
    end
    
    if #validWords > 0 then
        -- Return random word from valid ones
        return validWords[math.random(1, #validWords)]
    end
    
    return nil
end

--[[ AUTO TYPE ]]

local function TypeWord(word)
    if not word then return false end
    
    local input = FindInputBox()
    if not input then 
        Notify("Error", "Can't find input box!", 3)
        return false 
    end
    
    -- Clear and type
    input.Text = ""
    wait(Settings.TypeDelay)
    
    input.Text = word
    wait(Settings.TypeDelay)
    
    -- Try to submit - look for submit button or press enter
    local submitted = false
    
    -- Method 1: Find Submit/Enter button
    for _, gui in pairs(PlayerGui:GetDescendants()) do
        if gui:IsA("TextButton") and gui.Visible then
            local text = gui.Text:lower()
            if text:find("submit") or text:find("enter") or text:find("send") then
                -- Click the button
                for _, connection in pairs(getconnections(gui.MouseButton1Click)) do
                    connection:Fire()
                end
                submitted = true
                break
            end
        end
    end
    
    -- Method 2: Press Enter key
    if not submitted then
        game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.Return, false, game)
        wait(0.1)
        game:GetService("VirtualInputManager"):SendKeyEvent(false, Enum.KeyCode.Return, false, game)
    end
    
    -- Add to used words
    table.insert(UsedWords, word:lower())
    
    Notify("Typed!", "Word: " .. word, 2)
    return true
end

--[[ AUTO SIT ]]

local function SitAtTable()
    local char = Player.Character
    if not char then return end
    
    -- Find seats
    for _, obj in pairs(Workspace:GetDescendants()) do
        if obj:IsA("Seat") and not obj.Occupant then
            local hrp = char:FindFirstChild("HumanoidRootPart")
            if hrp then
                hrp.CFrame = obj.CFrame + Vector3.new(0, 2, 0)
                wait(0.5)
                Notify("Seated!", "Joined table", 2)
                return true
            end
        end
    end
    
    Notify("Error", "No empty seats found", 3)
    return false
end

--[[ AUTO PLAY LOOP ]]

local AutoPlayLoop = nil

local function StartAutoPlay()
    if AutoPlayLoop then return end
    
    Notify("Started!", "Auto play active", 3)
    
    AutoPlayLoop = RunService.Heartbeat:Connect(function()
        if not Settings.AutoPlay then return end
        
        wait(0.5)
        
        pcall(function()
            -- Detect required letter
            local letter = DetectRequiredLetter()
            
            if letter and #letter >= 1 then
                -- Find word
                local word = FindWord(letter)
                
                if word then
                    -- Type it
                    TypeWord(word)
                    wait(2)
                end
            end
        end)
    end)
end

local function StopAutoPlay()
    if AutoPlayLoop then
        AutoPlayLoop:Disconnect()
        AutoPlayLoop = nil
        Notify("Stopped!", "Auto play disabled", 3)
    end
end

--[[ UI ]]

MainTab:CreateLabel("â”â”â” ğŸ® Controls â”â”â”")

MainTab:CreateToggle({
    Name = "ğŸ¤– Auto Play",
    CurrentValue = false,
    Callback = function(Value)
        Settings.AutoPlay = Value
        if Value then
            StartAutoPlay()
        else
            StopAutoPlay()
        end
    end,
})

MainTab:CreateToggle({
    Name = "ğŸª‘ Auto Sit at Table",
    CurrentValue = false,
    Callback = function(Value)
        Settings.AutoSit = Value
    end,
})

MainTab:CreateSlider({
    Name = "Type Delay",
    Range = {0.1, 3},
    Increment = 0.1,
    CurrentValue = 0.5,
    Callback = function(Value)
        Settings.TypeDelay = Value
    end,
})

MainTab:CreateLabel("â”â”â” Manual â”â”â”")

MainTab:CreateButton({
    Name = "ğŸª‘ Sit Now",
    Callback = function()
        SitAtTable()
    end,
})

MainTab:CreateButton({
    Name = "ğŸ”„ Clear Used Words",
    Callback = function()
        UsedWords = {}
        Notify("Cleared!", "Used words reset", 2)
    end,
})

MainTab:CreateToggle({
    Name = "ğŸ’¤ Anti-AFK",
    CurrentValue = true,
    Callback = function(Value)
        Settings.AntiAFK = Value
    end,
})

-- WORDS TAB
WordsTab:CreateLabel("â”â”â” ğŸ“– Find Words â”â”â”")

WordsTab:CreateInput({
    Name = "Test Letter:",
    PlaceholderText = "Type letter (A or AB)",
    RemoveTextAfterFocusLost = false,
    Callback = function(Text)
        if Text ~= "" then
            local word = FindWord(Text:lower())
            if word then
                Notify("Found!", "Word: " .. word, 3)
            else
                Notify("Not Found", "No words for: " .. Text, 3)
            end
        end
    end,
})

WordsTab:CreateLabel("â”â”â” Manual Type â”â”â”")

WordsTab:CreateInput({
    Name = "Type Custom Word:",
    PlaceholderText = "Enter word",
    RemoveTextAfterFocusLost = false,
    Callback = function(Text)
        if Text ~= "" then
            TypeWord(Text)
        end
    end,
})

WordsTab:CreateLabel("Total Words: 1000+")
WordsTab:CreateLabel("Covers all letters A-Z")
WordsTab:CreateLabel("2-letter combos supported")

-- DEBUG TAB
DebugTab:CreateLabel("â”â”â” ğŸ” Game Inspector â”â”â”")

DebugTab:CreateButton({
    Name = "ğŸ” Scan GUI (Check Console)",
    Callback = function()
        ScanGUI()
        Notify("Scanned!", "Check console (F9)", 3)
    end,
})

DebugTab:CreateButton({
    Name = "ğŸ“ Find Input Box",
    Callback = function()
        local box = FindInputBox()
        if box then
            Notify("Found!", "Input: " .. box.Name, 3)
            print("Input Box:", box:GetFullName())
        else
            Notify("Error", "No input found!", 3)
        end
    end,
})

DebugTab:CreateButton({
    Name = "ğŸ”¤ Detect Letter",
    Callback = function()
        local letter = DetectRequiredLetter()
        if letter then
            Notify("Letter!", "Required: " .. letter, 3)
        else
            Notify("Error", "No letter found!", 3)
        end
    end,
})

DebugTab:CreateLabel("â”â”â” Info â”â”â”")
DebugTab:CreateLabel("Current Letter: " .. (GameInfo.CurrentLetter or "None"))
DebugTab:CreateLabel("Used Words: " .. #UsedWords)

--[[ INIT ]]

task.spawn(function()
    wait(2)
    
    -- Auto scan
    ScanGUI()
    FindInputBox()
    
    Notify("Loaded!", "Script ready! ğŸ”¤", 5)
    print("âœ… Script Loaded!")
    print("ğŸ’¡ Use Debug tab to inspect game")
    print("ğŸ® Turn on Auto Play to start")
end)

-- Anti-AFK
Player.Idled:Connect(function()
    if Settings.AntiAFK then
        VirtualUser:CaptureController()
        VirtualUser:ClickButton2(Vector2.new())
    end
end)

-- Auto sit loop
task.spawn(function()
    while wait(5) do
        if Settings.AutoSit and not GameInfo.InGame then
            SitAtTable()
        end
    end
end)

print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
print("ğŸ”¤ LAST LETTER - REAL VERSION")
print("âœ… DEEP SCANNER ACTIVE")
print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
